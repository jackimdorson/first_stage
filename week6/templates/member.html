{% extends "base.html" %}
{% block title %}會員頁{% endblock %}
{% block h2 %}<a href="/">歡迎光臨，這是會員頁</a>{% endblock %}
{% block content %}
    <main>
        <section>
            <h3>{{ sessionName }}，歡迎登入系統</h3>
            <div class="link-box">
                <a href="{{ request.url_for('signout') }}">登出系統</a>
            </div>
        </section>
        <hr>
        <section>
            <h3>快來留言吧</h3>
            <form action="{{ request.url_for('createmsg') }}" method="POST" id="create_msg">
                <label for="leave-msg">內容</label>
                <textarea name="leave_msg" id="leave_msg" autofocus></textarea>
                <button type="submit">送出</button>
            </form>
        </section>
        <hr>
        <section>
            {% for name, id, content, time in members %}
                <div class="msg_block">
                    <p><strong>{{ name }} : </strong>{{ content }}</p>
                    {% if name == sessionName %}
                        <form action="{{ request.url_for('deletemsg') }}" method="POST" class="delete_form">
                            <input type="hidden" name="message_id" value="{{ id }}">
                            <button type="submit" class="delete_btn">X</button>
                        </form>
                    {% endif %}
                </div>
            {% endfor %}
        </section>
    </main>
{% endblock %}
{% block js %}<script src="{{ url_for('static', path='js/member.js') }}"></script>{% endblock %}